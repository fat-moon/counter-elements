const header=document.getElementById("header"),game=document.getElementById("game"),startButtons=document.getElementById("start-buttons"),results=document.getElementById("results"),enemyElements=document.getElementById("enemy-elements");let marginTopEnemyElements=-14725;const enemyElementsArray=["fire","earth","water"],numberKindsEnemyElements=enemyElementsArray.length;let numberEnemyElements=199,currentEnemyElement,valueCurrentEnemyElement;const countdown=document.getElementById("countdown");let gameActive=!1;const playButton=document.getElementById("play-button"),tutorialButton=document.getElementById("tutorial-button"),backButton=document.getElementById("back-button"),gameButtons=document.getElementById("game-buttons"),fireButton=document.getElementById("fire-button"),earthButton=document.getElementById("earth-button"),waterButton=document.getElementById("water-button"),timer=document.getElementById("timer"),timerClock=document.getElementById("timer-clock");let time=64e3,showTime,countdownInterval,pulsationCounter=0,winCounter=0;const numberPulsations=document.getElementById("number-pulsations"),counteractedElements=document.getElementById("counteracted-elements"),hitPercentage=document.getElementById("hit-percentage"),returnButton=document.getElementById("return-button");let tutorialActive=!1;playButton.addEventListener("click",()=>{setTimeout(()=>{header.classList.add("transparent"),startButtons.classList.add("transparent"),game.classList.remove("hidden","transparent"),setTimeout(()=>{header.classList.add("hidden"),startButtons.classList.add("hidden"),gameButtons.classList.add("game-buttons--active"),enemyElements.classList.add("enemy-elements--active-transition"),timer.classList.remove("transparent"),backButton.classList.remove("transparent")},400),setTimeout(()=>{enemyElements.classList.remove("enemy-elements--active-transition"),enemyElements.classList.add("enemy-elements--active")},900),tutorialActive||(countdownInterval=setInterval(countdownGame,1e3))},400)},!1);const countdownGame=()=>{time-=1e3,showTime=time/1e3,timerClock.textContent=`00:${showTime}`,59e3<time&&(timerClock.textContent="01:00"),6e4===time&&(gameActive=!0),time<=9e3&&(timerClock.textContent=`00:0${showTime}`),0===time&&(clearInterval(countdownInterval),gameActive=!1,gameResults())},createNewElement=()=>{var e=Math.floor(Math.random()*numberKindsEnemyElements),e=enemyElementsArray[e];newEnemyElement=document.createElement("li"),newEnemyElement.className+=`element element--${e}`,newEnemyElement.setAttribute("data-element",e);const t=document.createElement("span");t.className+=`element__symbol element__symbol--${e}`,enemyElements.prepend(newEnemyElement),newEnemyElement.appendChild(t)},assignIdElement=e=>{enemyElement[e].id="current-enemy-element",currentEnemyElement=document.getElementById("current-enemy-element"),valueCurrentEnemyElement=currentEnemyElement.getAttribute("data-element")},startEnemyElements=()=>{for(let e=0;e<200;e++)createNewElement()};startEnemyElements();let enemyElement=enemyElements.querySelectorAll("li");assignIdElement(numberEnemyElements);const moveElements=()=>{marginTopEnemyElements+=75,enemyElements.style.marginTop=`${marginTopEnemyElements}px`},chooseElement=e=>{var t;gameActive&&(pulsationCounter++,t=e.getAttribute("aria-label"),console.log(chooseElement,valueCurrentEnemyElement),"fire"===t&&"earth"===valueCurrentEnemyElement||"earth"===t&&"water"===valueCurrentEnemyElement||"water"===t&&"fire"===valueCurrentEnemyElement?(winCounter++,currentEnemyElement.classList.remove("element--mistake"),currentEnemyElement.classList.add("element--remove"),currentEnemyElement.removeAttribute("id"),numberEnemyElements--,assignIdElement(numberEnemyElements),moveElements()):(currentEnemyElement.classList.add("element--mistake"),setTimeout(()=>currentEnemyElement.classList.remove("element--mistake"),100)),e.classList.add("button--game-pressed"),setTimeout(()=>e.classList.remove("button--game-pressed"),100))};fireButton.addEventListener("mousedown",()=>chooseElement(fireButton),!1),earthButton.addEventListener("mousedown",()=>chooseElement(earthButton),!1),waterButton.addEventListener("mousedown",()=>chooseElement(waterButton),!1),tutorialButton.addEventListener("click",()=>{countdown.classList.add("hidden"),timer.classList.add("timer--tutorial"),enemyElements.classList.add("enemy-elements--tutorial"),gameButtons.classList.add("game-buttons--tutorial"),fireButton.classList.add("button--tutorial"),earthButton.classList.add("button--tutorial"),waterButton.classList.add("button--tutorial"),tutorialActive=!0;enemyElements.innerHTML=`
	<li class="element element--water"><span class="element__symbol element__symbol--water"></span></li>
	<li class="element element--earth"><span class="element__symbol element__symbol--earth"></span></li>
	<li class="element element--fire"><span class="element__symbol element__symbol--fire"></span></li>
	<li class="element element--earth"><span class="element__symbol element__symbol--earth"></span></li>
	<li class="element element--water"><span class="element__symbol element__symbol--water"></span></li>`,enemyElements.style.marginTop="-100px",setTimeout(()=>gameButtons.classList.add("game-buttons--tutorial-active"),800),playButton.click()});const gameResults=()=>{game.classList.add("transparent"),backButton.classList.add("transparent"),timer.classList.add("transparent"),enemyElements.classList.remove("enemy-elements--active"),gameButtons.classList.remove("game-buttons--active"),setTimeout(()=>{numberPulsations.textContent=pulsationCounter,counteractedElements.textContent=winCounter,0<pulsationCounter?hitPercentage.textContent=`${(100*winCounter/pulsationCounter).toFixed(2)}%`:hitPercentage.textContent="0.00%",results.classList.remove("hidden","transparent")},400)},reset=()=>{clearInterval(countdownInterval),gameActive=!1,game.classList.add("transparent","hidden"),results.classList.add("transparent","hidden"),header.classList.remove("hidden"),startButtons.classList.remove("hidden"),gameButtons.classList.remove("game-buttons--active","game-buttons--tutorial","game-buttons--tutorial-active"),fireButton.classList.remove("button--tutorial"),earthButton.classList.remove("button--tutorial"),waterButton.classList.remove("button--tutorial"),enemyElements.classList.remove("enemy-elements--active","enemy-elements--active-transition"),timer.classList.add("transparent"),backButton.classList.add("transparent"),enemyElements.innerHTML="",enemyElements.style.marginTop="-14725px",marginTopEnemyElements=-14725,startEnemyElements(),numberEnemyElements=199,enemyElement=enemyElements.querySelectorAll("li"),assignIdElement(numberEnemyElements),time=64e3,timerClock.textContent="01:00",pulsationCounter=0,winCounter=0,countdown.classList.remove("hidden"),timer.classList.remove("timer--tutorial"),enemyElements.classList.remove("enemy-elements--tutorial"),tutorialActive=!1,setTimeout(()=>{header.classList.remove("transparent"),startButtons.classList.remove("transparent")},150)};returnButton.addEventListener("click",reset),backButton.addEventListener("click",reset);let vh=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${vh}px`),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("https://juan-antonio-ledesma.github.io/counter-elements/sw.js").then(e=>{console.log("ServiceWorker registration successful with scope: ",e.scope)},e=>{console.log("ServiceWorker registration failed: ",e)})});